Subject: [PATCH] Adicionada as partes de cadastro e listagem de clientes e adicionada mensagem de sucesso e erro na hora do cadastro
---
Index: src/main/java/br/dmkm/sistema_cadastro/Controller/ClienteController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/br/dmkm/sistema_cadastro/Controller/ClienteController.java b/src/main/java/br/dmkm/sistema_cadastro/Controller/ClienteController.java
--- a/src/main/java/br/dmkm/sistema_cadastro/Controller/ClienteController.java	(revision 03d1254098f7c2128375c8b3366463a9fa137f61)
+++ b/src/main/java/br/dmkm/sistema_cadastro/Controller/ClienteController.java	(revision 6b655fab7083f77907cb69df15b4625fdb83ddd8)
@@ -4,8 +4,11 @@
 import br.dmkm.sistema_cadastro.Repositories.ClienteRepository;
 import org.springframework.beans.factory.annotation.Autowired;
 import org.springframework.stereotype.Controller;
+import org.springframework.ui.Model;
 import org.springframework.web.bind.annotation.GetMapping;
 import org.springframework.web.bind.annotation.PostMapping;
+import org.springframework.web.bind.annotation.RequestParam;
+import org.springframework.web.bind.annotation.ResponseBody;
 
 import java.util.List;
 
@@ -14,22 +17,40 @@
     @Autowired
     private ClienteRepository clienteRepository;
 
-
     @GetMapping("/cadastrar-cliente")
     public String cadastro() {
         return "cliente-cadastro";
     }
+
     @PostMapping("/cadastrar-cliente/cadastrar")
+    public String criar(Cliente cliente, Model model) {
+        try {
+            Cliente savedCliente = clienteRepository.save(cliente);
+            model.addAttribute("successMessage", "Cliente " + savedCliente.getNome() + " cadastrado com sucesso!\n Código do cliente: [ " + savedCliente.getId() + " ] (anote o seu código de cliente para consultas futuras).");
+        } catch (Exception e) {
+            model.addAttribute("errorMessage", "Erro ao cadastrar o cliente. Por favor, tente novamente.");
+        }
+        return "cliente-cadastro";
+    }
+
+    /*@PostMapping("/cadastrar-cliente/cadastrar")
     public String criar(Cliente cliente) {
         clienteRepository.save(cliente);
         return "redirect:/";
+    }*/
+
+    @GetMapping("/clientes")
+    public String listarClientes(Model model) {
+        List<Cliente> clientes = clienteRepository.findAll();
+        model.addAttribute("clientes", clientes);
+        return "cliente-consultar";
     }
 
-    /*
-        @PostMapping("/usuario/criar")
-    public String criar(Usuario usuario){
-        usuarioRepository.save(usuario);
-        return "redirect:/";
+    @GetMapping("/clientes/buscar")
+    public String buscarClientes(@RequestParam("nome") String nome, Model model) {
+        List<Cliente> clientes = clienteRepository.findByNomeContainingIgnoreCase(nome);
+        model.addAttribute("clientes", clientes);
+        return "cliente-consultar";
     }
-     */
-}
+
+}
\ No newline at end of file
Index: src/main/java/br/dmkm/sistema_cadastro/Repositories/ClienteRepository.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/br/dmkm/sistema_cadastro/Repositories/ClienteRepository.java b/src/main/java/br/dmkm/sistema_cadastro/Repositories/ClienteRepository.java
--- a/src/main/java/br/dmkm/sistema_cadastro/Repositories/ClienteRepository.java	(revision 03d1254098f7c2128375c8b3366463a9fa137f61)
+++ b/src/main/java/br/dmkm/sistema_cadastro/Repositories/ClienteRepository.java	(revision 6b655fab7083f77907cb69df15b4625fdb83ddd8)
@@ -3,5 +3,8 @@
 import br.dmkm.sistema_cadastro.Models.Cliente;
 import org.springframework.data.jpa.repository.JpaRepository;
 
-public interface ClienteRepository extends JpaRepository<Cliente, Integer> {
+import java.util.List;
+
+public interface ClienteRepository extends JpaRepository<Cliente, Long> {
+    List<Cliente> findByNomeContainingIgnoreCase(String nome);
 }
Index: src/main/resources/application.properties
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>ISO-8859-1
===================================================================
diff --git a/src/main/resources/application.properties b/src/main/resources/application.properties
--- a/src/main/resources/application.properties	(revision 03d1254098f7c2128375c8b3366463a9fa137f61)
+++ b/src/main/resources/application.properties	(revision 6b655fab7083f77907cb69df15b4625fdb83ddd8)
@@ -1,9 +1,10 @@
 spring.application.name=sistema-cadastro
 
-# Confiuração do banco de dados
+# Configuração do banco de dados
 spring.datasource.username=root
-spring.datasource.password=
+spring.datasource.password=6375542
 spring.datasource.url=jdbc:mysql://localhost:3306/sistema_cadastro
 spring.jpa.show_sql=true
+spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
 spring.jpa.hibernate.ddl-auto=update
-spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
\ No newline at end of file
+spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
Index: src/main/resources/templates/cliente-cadastro.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/resources/templates/cliente-cadastro.html b/src/main/resources/templates/cliente-cadastro.html
--- a/src/main/resources/templates/cliente-cadastro.html	(revision 03d1254098f7c2128375c8b3366463a9fa137f61)
+++ b/src/main/resources/templates/cliente-cadastro.html	(revision 6b655fab7083f77907cb69df15b4625fdb83ddd8)
@@ -79,34 +79,59 @@
             background-color: #61dafb;
             color: #282c34;
         }
+        .message {
+            margin-bottom: 20px;
+            padding: 15px;
+            border-radius: 5px;
+            font-size: 16px;
+        }
+        .success {
+            background-color: #4caf50;
+            color: white;
+        }
+        .error {
+            background-color: #f44336;
+            color: white;
+        }
     </style>
 </head>
 <body>
-    <div class="container">
-        <h1>Cadastro</h1>
-        <form method="post" action="/cadastrar-cliente/cadastrar" >
-            <label for="nome">Nome Completo</label>
-            <input type="text" id="nome" name="nome" required>
-            
-            <label for="idade">Idade</label>
-            <input type="number" id="idade" name="idade" required>
-            
-            <label for="CPF">CPF</label>
-            <input type="text" id="cpf" name="cpf" required>
-            
-            <label for="altura">Altura (em cm)</label>
-            <input type="number" id="altura" name="altura" required>
+<div class="container">
+    <h1>Cadastro</h1>
+
+    <!-- Mensagem de sucesso -->
+    <div th:if="${successMessage}" class="message success">
+        <p th:text="${successMessage}"></p>
+    </div>
+
+    <!-- Mensagem de erro -->
+    <div th:if="${errorMessage}" class="message error">
+        <p th:text="${errorMessage}"></p>
+    </div>
+
+    <form method="post" action="/cadastrar-cliente/cadastrar">
+        <label for="nome">Nome Completo</label>
+        <input type="text" id="nome" name="nome" required>
+
+        <label for="idade">Idade</label>
+        <input type="number" id="idade" name="idade" required>
+
+        <label for="CPF">CPF</label>
+        <input type="text" id="cpf" name="cpf" required>
+
+        <label for="altura">Altura (em cm)</label>
+        <input type="number" id="altura" name="altura" required>
 
-            <label for="peso">Peso (em kg)</label>
-            <input type="number" id="peso" name="peso" required>
+        <label for="peso">Peso (em kg)</label>
+        <input type="number" id="peso" name="peso" required>
 
-            <label for="rendaPessoal">Renda Pessoal</label>
-            <input type="text" id="rendaPessoal" name="rendaPessoal" required>
+        <label for="rendaPessoal">Renda Pessoal</label>
+        <input type="text" id="rendaPessoal" name="rendaPessoal" required>
 
-            <input type="submit" value="Cadastrar">
+        <input type="submit" value="Cadastrar">
 
-            <a href="/">Voltar</a>
-        </form>
-    </div>
+        <a href="/">Voltar</a>
+    </form>
+</div>
 </body>
-</html>
+</html>
\ No newline at end of file
Index: src/main/resources/templates/cliente-consultar.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/resources/templates/cliente-consultar.html b/src/main/resources/templates/cliente-consultar.html
--- a/src/main/resources/templates/cliente-consultar.html	(revision 03d1254098f7c2128375c8b3366463a9fa137f61)
+++ b/src/main/resources/templates/cliente-consultar.html	(revision 6b655fab7083f77907cb69df15b4625fdb83ddd8)
@@ -3,7 +3,7 @@
 <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
-    <title>Usuários Cadastrados</title>
+    <title>Clientes Cadastrados</title>
     <style>
         body {
             font-family: Arial, sans-serif;
@@ -16,6 +16,7 @@
             min-height: 100vh;
             margin: 0;
         }
+
         .container {
             background-color: #3a3f47;
             padding: 40px;
@@ -24,7 +25,9 @@
             width: 100%;
             max-width: 700px;
             box-sizing: border-box;
+            overflow-x: auto;
         }
+
         h1 {
             margin-bottom: 30px;
             font-size: 24px;
@@ -32,29 +35,63 @@
             letter-spacing: 2px;
             text-align: center;
         }
+
         table {
             width: 100%;
             border-collapse: collapse;
-            margin-bottom: 20px; /* Espaço para o link "Voltar" */
+            margin-bottom: 20px;
+            table-layout: fixed;
         }
+
         th, td {
             padding: 12px;
             border: 1px solid #555;
             text-align: left;
             font-size: 16px;
+            word-wrap: break-word;
         }
-        .Buscar{
-            font-size: 15px;
-        }
+
         th {
             background-color: #444;
         }
+
         tr:nth-child(even) {
             background-color: #3a3f47;
         }
+
         tr:nth-child(odd) {
             background-color: #484e57;
         }
+
+        /* Estilo do campo de busca */
+        input[type="text"] {
+            width: calc(40% - 22px);
+            padding: 10px;
+            border-radius: 5px;
+            border: 1px solid #555;
+            margin-bottom: 20px;
+            background-color: #3a3f47;
+            color: #fff;
+            font-size: 16px;
+        }
+
+        /* Estilo do botão de busca */
+        input[type="submit"] {
+            padding: 10px 20px;
+            background-color: #61dafb;
+            color: #282c34;
+            border: none;
+            border-radius: 5px;
+            font-size: 16px;
+            cursor: pointer;
+            transition: background-color 0.3s, color 0.3s;
+            margin-left: 10px;
+        }
+
+        input[type="submit"]:hover {
+            background-color: #21a1f1;
+        }
+
         a {
             display: inline-block;
             font-size: 16px;
@@ -66,6 +103,7 @@
             transition: background-color 0.3s, color 0.3s;
             text-align: center;
         }
+
         a:hover {
             background-color: #61dafb;
             color: #282c34;
@@ -73,42 +111,37 @@
     </style>
 </head>
 <body>
-    <div class="container">
-        <h1>Usuários Cadastrados</h1>
-        <h1 class="Buscar">Buscar usuarios</h1>
-        <table>
-            <thead>
-                <tr>
-                    <th>Nome</th>
-                    <th>Idade</th>
-                    <th>CPF</th>
-                    <th>Altura</th>
-                    <th>Peso</th>
-                    <th>Renda Pessoal</th>
-                </tr>
-            </thead>
-            <tbody>
-                <!-- Exemplo de usuários cadastrados -->
-                <tr>
-                    <td>Karlos Eduardo</td>
-                    <td>30</td>
-                    <td>123.456.789-00</td>
-                    <td>1.75 m</td>
-                    <td>70 kg</td>
-                    <td>R$ 3.000,00</td>
-                </tr>
-                <tr>
-                    <td>Maria Luiza</td>
-                    <td>25</td>
-                    <td>987.654.321-00</td>
-                    <td>1.68 m</td>
-                    <td>60 kg</td>
-                    <td>R$ 2.500,00</td>                 
-                </tr>
-                <!-- Adicione mais usuários conforme necessário -->
-            </tbody>
-        </table>
-        <a href="index.html">Voltar</a>
-    </div>
+<div class="container">
+    <h1>Clientes Cadastrados</h1>
+    <form action="/clientes/buscar" method="get">
+        <input type="text" name="nome" placeholder="Buscar por nome" required>
+        <input type="submit" value="Buscar">
+    </form>
+    <table>
+        <thead>
+        <tr>
+            <th>Código do cliente</th>
+            <th>Nome</th>
+            <th>Idade</th>
+            <th>CPF</th>
+            <th>Altura</th>
+            <th>Peso</th>
+            <th>Renda Pessoal</th>
+        </tr>
+        </thead>
+        <tbody>
+        <tr th:each="cliente : ${clientes}">
+            <td th:text="${cliente.id}">Código</td>
+            <td th:text="${cliente.nome}">Nome</td>
+            <td th:text="${cliente.idade}">Idade</td>
+            <td th:text="${cliente.cpf}">CPF</td>
+            <td th:text="${cliente.altura}">Altura</td>
+            <td th:text="${cliente.peso}">Peso</td>
+            <td th:text="${cliente.rendaPessoal}">Renda Pessoal</td>
+        </tr>
+        </tbody>
+    </table>
+    <a href="/">Voltar</a>
+</div>
 </body>
 </html>
Index: src/main/resources/templates/index.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/resources/templates/index.html b/src/main/resources/templates/index.html
--- a/src/main/resources/templates/index.html	(revision 03d1254098f7c2128375c8b3366463a9fa137f61)
+++ b/src/main/resources/templates/index.html	(revision 6b655fab7083f77907cb69df15b4625fdb83ddd8)
@@ -53,7 +53,7 @@
     <div class="menu">
         <h1>Menu Principal</h1>
         <a href="/cadastrar-cliente">Cadastrar</a>
-        <a href="consultar.html">Consultar Cadastros</a>
+        <a href="/clientes">Consultar Cadastros</a>
         <a href="imc.html">Calcular IMC</a>
         <a href="equipe.html">Equipe</a>
         <a href="sair.html">Sair</a>
